{% extends "layout.html" %}
{% block content %}
<div class="container admin-main">
  <h1>Admin Dashboard</h1>
  <p><a href="{{ url_for('admin_logout') }}" class="btn ghost">Logout</a></p>

  <div class="admin-grid">
    <div class="admin-card">
      <h3>Site Info</h3>
      <form id="site-form">
        <label>Business Name</label><input name="bizName" value="{{ settings.get('bizName','') }}">
        <label>Tagline HI</label><input name="tagline_hi" value="{{ settings.get('tagline_hi','') }}">
        <label>Address</label><input name="address" value="{{ settings.get('address','') }}">
        <label>Phone</label><input name="phone" value="{{ settings.get('phone','') }}">
        <button id="save-site" class="btn primary">Save</button>
      </form>
    </div>

    <div class="admin-card">
      <h3>Products</h3>
      <form id="product-form" enctype="multipart/form-data">
        <input name="name_hi" placeholder="Name (HI)">
        <input name="name_en" placeholder="Name (EN)">
        <input name="price" placeholder="Price (â‚¹)">
        <input name="price_num" placeholder="Price numeric">
        <input name="img" placeholder="Image URL (or upload)">
        <input type="file" name="file">
        <button id="add-product" class="btn">Add Product</button>
      </form>

      <div id="products-list-admin" style="margin-top:10px">
        {% for p in products %}
          <div class="product-row">
            <img src="{{ p.img or url_for('static', filename='images/no-image.png') }}" class="thumb" onerror="this.src='{{ url_for('static', filename='images/no-image.png') }}'">
            <div><strong>{{ p.name_hi or p.name_en }}</strong><div class="small">{{ p.price }}</div></div>
            <div class="actions">
              <button class="btn small edit" data-id="{{ p.id }}">Edit</button>
              <button class="btn small danger delete" data-id="{{ p.id }}">Delete</button>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
</div>
<script>/* admin JS in static/js/main.js */</script>
{% endblock %}
